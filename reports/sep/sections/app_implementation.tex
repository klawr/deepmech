\section{App implementation} \label{ch:app_implementation}

The prototype suffices as proof of concept.
However, the model lacks a suitable environment to be used.
The prototype applies the model and its implementation into each instance of \name{mec-2} and patches a canvas on top of the element to be able to draw.
This is not optimal, because this approach is neither flexible nor extensible.
So instead of using just the \name{mec2} HTML-element, a web application is built around it.
This web application may be used as a progressive web app to be accessed via a browser or even embedded into other third-party apps.

\subsection{Creation of a Progressive Web App}

The goal of the application is to provide a user interface where the user can work with \name{mec2} interactively, especially using hand-drawings.
This is achieved by using \name{mec2} as the base and creating an environment around this HTML-element.

Components used to create the user interface are mostly written using \name{React}. % TODO citation needed.
React is a JavaScript framework, which allows for the usage of single components, allowing standard HTML and JavaScript besides it.
This is a requirement the original \name{mec2} HTML-Component should be used without any modifications.

% TODO uncomment this. By using \name{materialUI} \cite{MaterialUI2020} a consistent and modern layout is created.

\subsection{Structure of the application}

\begin{figure}
    \centering
    \fbox{\includegraphics[width=0.9\textwidth]{images/deepmech_klawr_de.png}}
    \caption[Screenshot of the web application]{ Both drawers are expanded. On the left the \name{mec2} controls can be seen, on the right a summary of elements of the model are listed. The tab for \name{constraints} is expanded where some properties are shown }
    \label{fig:deepmech_klawr_de}
\end{figure}

\subsubsection{Left drawer}

The structure of the user interface aims to be simple and straight forward.
The left drawer contains the \code{MecControl}, which is a custom \name{React} component to replace the default \name{mec2} controls by using the designated API. % TODO explain API?
Furthermore, the left drawer contains functions

Custom \name{React} components are designed using \name{Reacts'} \name{jsx}.
\name{jsx} is a syntax which can be used by \name{React} to define components by a very comfortable syntax similar to \name{HTML}\footnote{By using \name{jsx} it is now necessary to compile the project using \name{Babel.js}.}. % TODO citation neede

\begin{lstlisting}[label={lst:mec_control}, caption={Definition of the \name{MecControl component.}}]
export default function MecControl({ mecReset, className }) {
    const dispatch = useDispatch();
    const mec = useSelector(mecSelect);

    return <List className={className}>
        <ListButton onClick={() =>
            dispatch(mecAction.toggleRun())} tooltip="Run/Pause mechanism">
            {mec.pausing ? <PlayArrow /> : <Pause />}
        </ListButton>
        <ListButton onClick={() =>
            dispatch(mecAction.toggleGravity())} tooltip="Toggle gravity">
            g {mec.gravity ? <Clear /> : <ArrowDownward />}
        </ListButton>
        <ListButton onClick={mecReset} tooltip="Reset">
            <RotateLeft />
        </ListButton>
    </List>
}
\end{lstlisting}

Listing \ref{lst:mec_control} shows the function which returns the component replacing the default \name{mec2} controls.
It contains two variables: \code{dispatch} 

\subsubsection{Right drawer}

\subsection{State manipulation}
